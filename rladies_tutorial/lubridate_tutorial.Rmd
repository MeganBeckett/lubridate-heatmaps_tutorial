---
title: "R-Ladies Cape Town: What's in a date?"
author: "Megan Beckett"
date: "16 August 2018"
output:
  html_notebook:
    fig_height: 4.5
    fig_width: 7
    toc: yes
---
# Overview
Date-time data can be frustrating to work with in R. R commands for date-times are generally unintuitive and change depending on the type of date-time object being used. Moreover, the methods we use with date-times must be robust to time zones, leap days, daylight savings times, and other time related quirks, and R lacks these capabilities in some situations. Lubridate makes it easier to do the things R does with date-times and possible to do the things R does not.

# Resources
- Make sure you check out the very handy R-Studio cheatsheet: https://rawgit.com/rstudio/cheatsheets/master/lubridate.pdf
- The chapter in R for Data Science on dates and times: http://r4ds.had.co.nz/dates-and-times.html

# Lubridate tutorial
Let's explore some of the functions within the lubridate package.

## But first, installation!
```{r}
# The easiest way to get lubridate is to install the whole tidyverse:
install.packages("tidyverse")

# Alternatively, install just lubridate:
install.packages("lubridate")

# Or the the development version from GitHub:
# install.packages("devtools")
devtools::install_github("tidyverse/lubridate")
```

Some of these functions can be done usng strptime and strftime in base R but we will be focusing on lubridate.

## Load package
```{r}
library(lubridate)
```
### Quick note:
POSI....what?
There are two internal implementations of date/time: POSIXct, which stores seconds since UNIX epoch (+some other data), and POSIXlt, which stores a list of day, month, year, hour, minute, second, etc.

## Lubridate features
### Reference points
```{r}
today = today()
today
now = now()
now
```

### Parsing dates and times
To create POSIXlt objects from strings, lubridate has a number of aptly named functions:
- ymd(), ymd_hms, dmy(), dmy_hms, mdy(), â€¦

```{r}
# When is Women's day?

ymd("20180809")
mdy("08-09-2018")
dmy("09/08/2018")
```

```{r}
# You try

# Parse as date
___("17 Sep 2018")

____("March 6, 1957")

# Parse as date and time (with no seconds!)
_____("July 15, 2012 12:56")

# Parse as date-time (with seconds)
______('2011-04-06 08:00:10')

# Parse all as dates
x <- c("2009-01-01", "2009-01-02", "2009-01-03")
___(x)

# Format to display date as "2018-01-01"
___(180101, 180102)

# Format to display "2010-02-01"
___(010210)

# Format to display "2010-01-02"
___(010210)

```
You see that these functions contain the formatting of the string in their name. In addition, they are robust in which separators are used (e.g. : or  -). Note that you can set the tz input argument to set the timezone.

### Extracting information from date-times

```{r}
womensday<-ymd_hms("2018-08-09-12-30-30", tz="GMT")
womensday

# Extract only the date
date(womensday)

# Is it a leap year?
leap_year(womensday)
```

### GET components of date-times
Getting useful information using functions such as year(), month(), mday(), hour(), minute() and second():

```{r}
year(womensday)
month(womensday)
week(womensday)
wday(womensday)
wday(womensday, label=TRUE)
yday(womensday)
hour(womensday)

```
```{r}
# You try
# Save your birthday as a date-time object (make up a time if you don't know!)
bday <- _______()

# What number week in the year were you born?
_____(bday)

# What number day in the year were you born
____(bday)

# Were you born in a leap year?
____(bday)

# What day of the week were you born? Print out the full, unabbreviated weekday
____(bday)


```

### SET components of date-time
Lubridate can be used to not only extract but also change prts of date-time objects

```{r}
month(womensday) <- 12
womensday

second(womensday) <-99
womensday

# Use update to change multple values
update(womensday, year = 1976, day = 16, month = 6, hour = 8)

```

```{r}
# You try
# Change your birth date to your birthday this year

_____(bday) <- ____
bday

```

### Arithmetic with dates
#### Some important time spans
- interval
- duration
- period



